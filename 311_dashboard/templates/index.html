<!DOCTYPE html>
<html>
<head>
  <title>311 Dashboard</title>
  <link rel="stylesheet" href="./static/css//bootstrap.min.css">
  <link rel="stylesheet" href="./static/css/keen-dashboards.css">
  <link rel="stylesheet" href="./static/css/dc.min.css">
  <link rel="stylesheet" href="./static/css/leaflet.css">
  <link rel="stylesheet" href="./static/css/bootstrap.min.css">

  <link rel="stylesheet" href="./static/css/slider.css">
  
  <style>
    #slider .slider-selection {
      background: green;
      }
  </style>

</head>
<body class="application">

    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="./">311 Data</a>
        </div>
      </div>
    </div>

  <div class="container-fluid">

    <div class="row">

    <!-- MAP -->
      <div class="col-sm-10">
        <div class="chart-wrapper">
          <div class="chart-stage">
            <div id="map-box" style="width: 800px; height: 400px">
            </div>
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <!-- MAP -->

      <!-- PANEL -->
        <div class="col-sm-2 container">
          <div class="chart-wrapper">
            <div class="chart-stage">

              <!--Button does not disable for some reason when you've selected more than 2 -->

              <!--<div class="btn-group-vertical" data-toggle="buttons">
                <label class="btn btn-primary btn-lg btn-block">
                  <input class="single-checkbox" type="checkbox" name="options" id="option1" autocomplete="off"> Blocked Driveway
                </label>
                <label class="btn btn-primary btn-lg btn-block">
                  <input class="single-checkbox" type="checkbox" name="options" id="option2" autocomplete="off"> General Construction
                </label>
                <label class="btn btn-primary btn-lg btn-block">
                  <input class="single-checkbox" type="checkbox" name="options" id="option3" autocomplete="off"> Heating
                </label>
                <label class="btn btn-primary btn-lg btn-block">
                  <input class="single-checkbox" type="checkbox" name="options" id="option4" autocomplete="off"> Illegal Parking
                </label>
                <label class="btn btn-primary btn-lg btn-block">
                  <input class="single-checkbox" type="checkbox" name="options" id="option5" autocomplete="off"> Plumbing
                </label>
                <label class="btn btn-primary btn-lg btn-block">
                  <input class="single-checkbox" type="checkbox" name="options" id="option6" autocomplete="off"> Residential Noise
                </label>
                <label class="btn btn-primary btn-lg btn-block">
                  <input class="single-checkbox" type="checkbox" name="options" id="option7" autocomplete="off"> Street Light Condition
                </label>
                <label class="btn btn-primary btn-lg btn-block">
                  <input class="single-checkbox" type="checkbox" name="options" id="option8" autocomplete="off"> Street Condition
                </label>
                <label class="btn btn-primary btn-lg btn-block">
                  <input class="single-checkbox" type="checkbox" name="options" id="option9" autocomplete="off"> Water System
                </label>
                <label class="btn btn-primary btn-lg btn-block">
                  <input class="single-checkbox" type="checkbox" name="options" id="option10" autocomplete="off"> Water (Heat/Hot)
                </label>
              </div>-->
              <div class="wrapper">
                <div class="col-sm-12 wrapper">
                  <form action="{{ url_for('query') }}" method="POST"> 
                    <div class="col-sm-10 checkbox" name="checkboxes">
                        <input class="single-checkbox" type="checkbox" name="options" value="Blocked Driveway"> Blocked Driveway <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="General Construction"> x General Construction <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Heating"> x Heating <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Illegal Parking"> Illegal Parking <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="PLUMBING"> Plumbing <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Noise - Residential"> Residential Noise <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Street Light Condition"> Street Light Condition <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Street Condition"> Street Condition <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Water System"> Water System <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Rodent"> Rodent <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Damaged Tree"> Damaged Tree <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Sanitation Condition"> Sanitation Condition <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Dirty Condition"> Dirty Conditions <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Noise"> Noise <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="ELECTRIC"> Electric <br>
                        <input class="single-checkbox" type="checkbox" name="options" value="Traffic Signal Condition"> Traffic Signal Condition <br>
                    </div>              

                    <div class="col-sm-2 wrapper">
                      <input name="time" id="time" type="text" style="width: auto;"/>

                      <input id="from" type="hidden" name="from" value="2011-09-00 00:00:00">
                      <input id="to" type="hidden" name="to" value="2015-01-00 00:00:00">
                    </div>

                    <input type ="submit">

                  </form>

                   <div class="wrapper">
                    <span>From: <span id="timeValue1">September 2011</span></span> <br>
                    <span>To: <span id="timeValue2">January 2015</span></span>
                  </div>

                </div>
              </div>

        
            </div>
          </div>
        </div> 

      <!-- PANEL -->

    <div class="row">
      <div class="col-sm-6 col-md-4">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <img data-src="holder.js/100%x120/white">
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
<!-- end of three -->

    <hr>

  </div>

  <script src="./static/js/jquery.min.js"></script>
  <script src="./static/js/bootstrap.min.js"></script>
  <script src="./static/js/underscore-min.js"></script>
  <script src="./static/js/crossfilter.js"></script>
  <script src="./static/js/d3.min.js"></script>
  <script src="./static/js/dc.min.js"></script>
  <script src="./static/js/queue.js"></script>
  <script src="./static/js/leaflet.js"></script>
  <script src="./static/js/leaflet-heat.js"></script>
  <script src="./static/js/keen.min.js"></script>
  <script src='./static/js/graphs.js' type='text/javascript'></script>

  <script src="./static/js/bootstrap-slider.js"></script>

  <script type="text/javascript">
      $(document).ready(function() {

        // for slider
        $("#time").slider({
            id: "slider",
            min: 0,
            max: 83,
            range: true,
            value: [20,60],
            orientation: 'vertical',
            // remove tooltip to display the index of months and years
            tooltip: "always" 

        });

        // for complaint checkbox 
        var limit = 2;
        $('input.single-checkbox').on('change', function(evt) {
          if($(this).siblings(':checked').length >= limit) {
              this.checked = false;
          }
        });

        var monthNames = ["January", "Februrary", "March", "April", "May", "June", "July", "August", "September",
        "October", "November", "December"];
        var yr = "";
        var month = "";
        var combo_yrMonth = "";
        $("#time").on("slide", function(slideEvt) {
          month = (slideEvt.value[0]% 12) + 1;
          yr = Math.floor(slideEvt.value[0]/12);
          
          // just the display 
          $("#timeValue1").text(monthNames[month-1] + " 201" + yr);
          
          if(month < 10) {
            month = "0" + month;
          }
          combo_yrMonth = "201" + yr + "-" + month + "-00" + " 00:00:00"
          
          ;
          
          // post data
          $("#from").val(combo_yrMonth);
                
        });

        var yr1 = "";
        var month1 = "";
        var combo_yrMonth1 = "";
        $("#time").on("slide", function(slideEvt) {
          // $("#timeValue2").text(monthNames[slideEvt.value[1] % 12] + " 201" + Math.floor(slideEvt.value[1]/12));
          // $("#to").val(monthNames[slideEvt.value[1] % 12] + " 201" + Math.floor(slideEvt.value[1]/12));

          month1 = (slideEvt.value[1] % 12) + 1;
          yr1 = Math.floor(slideEvt.value[1]/12);
          
          // just the display 
          $("#timeValue2").text(monthNames[month1-1] + " 201" + yr1);
          
          if(month1 < 10) {
            month1 = "0" + month1;
          }
          combo_yrMonth1 = "201" + yr1 + "-" + month1 + "-00" + " 23:59:59"
          
          // post data
          $("#to").val(combo_yrMonth1);

        }); 
        

    });
  </script>

</body>
</html>